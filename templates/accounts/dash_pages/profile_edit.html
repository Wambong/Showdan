{% load i18n %}

<div class="dash-main-card">

  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h3 class="text-white mb-1">{% translate "Edit profile" %}</h3>
      <div class="text-white-50 small">{% translate "Update your information, media and pricing" %}</div>
    </div>

    <a class="btn btn-outline-light btn-sm"
       href="{% url 'accounts:dashboard' %}"
       hx-get="{% url 'accounts:dash_home' %}"
       hx-target="#dashMainCard"
       hx-swap="innerHTML"
       hx-push-url="true">
      Back
    </a>
  </div>

  <form method="post"
        enctype="multipart/form-data"
        class="card card-body shadow-sm"
        id="profile-edit-form">

    {% csrf_token %}

    <!-- ================= ACCOUNT DETAILS ================= -->
    <h5 class="mb-3">{% translate "Account details" %}</h5>

    <div class="mb-3">
      <label for="id_first_name" class="form-label">{% translate "First name" %}</label>
      {{ form.first_name }}
      {% if form.first_name.errors %}<div class="text-danger small mt-2">{{ form.first_name.errors }}</div>{% endif %}
    </div>

    <div class="mb-3">
      <label for="id_last_name" class="form-label">{% translate "Last name" %}</label>
      {{ form.last_name }}
      {% if form.last_name.errors %}<div class="text-danger small mt-2">{{ form.last_name.errors }}</div>{% endif %}
    </div>

    <div class="mb-3">
      <label for="id_phone" class="form-label">{% translate "Phone" %}</label>
      {{ form.phone }}
      {% if form.phone.errors %}<div class="text-danger small mt-2">{{ form.phone.errors }}</div>{% endif %}
    </div>
    <div class="mb-3">
      <label for="id_country" class="form-label">{% translate "country" %}</label>
      {{ form.country }}
      {% if form.country.errors %}<div class="text-danger small mt-2">{{ form.country.errors }}</div>{% endif %}
    </div>
    <div class="mb-3">
      <label for="id_city" class="form-label">city" %}</label>
      {{ form.city }}
      {% if form.city.errors %}<div class="text-danger small mt-2">{{ form.city.errors }}</div>{% endif %}
    </div>

   <div class="mb-3">
      <label for="id_address" class="form-label">{% translate "address" %}</label>
      {{ form.address }}
      {% if form.address.errors %}<div class="text-danger small mt-2">{{ form.address.errors }}</div>{% endif %}
    </div>
    <div class="mb-3">
      <label class="form-label">{% translate "Date of birth" %}</label>
      {{ form.date_of_birth.as_hidden }}

      <div class="dob-picker" id="dob-picker">
        <div class="dob-col">
          <div class="dob-col-label">{% translate "Day" %}</div>
          <select id="dob-day" class="dob-select" size="5"></select>
        </div>

        <div class="dob-col">
          <div class="dob-col-label">{% translate "Month" %}</div>
          <select id="dob-month" class="dob-select" size="5"></select>
        </div>

        <div class="dob-col">
          <div class="dob-col-label">{% translate "Year" %}</div>
          <select id="dob-year" class="dob-select" size="5"></select>
        </div>

        <div class="dob-center-highlight"></div>
      </div>

      <div class="dob-output text-center mt-3" id="dob-output"></div>

      {% if form.date_of_birth.errors %}
        <div class="text-danger small mt-2">{{ form.date_of_birth.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label class="form-label">{% translate "Years of experience" %}</label>
      {{ form.years_of_experience.as_hidden }}

      <div class="exp-picker" id="exp-picker">
        <div class="exp-col">
          <div class="exp-col-label">{% translate "Years" %}</div>
          <select id="exp-years" class="exp-select" size="5"></select>
        </div>

        <div class="exp-center-highlight"></div>
      </div>

      <div class="exp-output text-center mt-3" id="exp-output"></div>

      {% if form.years_of_experience.errors %}
        <div class="text-danger small mt-2">{{ form.years_of_experience.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="id_about_me" class="form-label">{% translate "About me" %}</label>
      {{ form.about_me }}

      <div class="d-flex justify-content-between mt-2">
        <small class="text-muted">{% translate "Maximum 1000 words" %}.</small>
        <small class="text-muted">
          <span id="about-word-count">0</span>/1000 {% translate "words" %}
        </small>
      </div>

      {% if form.about_me.errors %}
        <div class="text-danger small mt-2">{{ form.about_me.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="id_communication_languages" class="form-label">{% translate "Communication language" %}</label>
      {{ form.communication_languages }}
      <div class="form-text">{% translate "Hold Ctrl (Windows) / Cmd (Mac) to select multiple" %}.</div>
      {% if form.communication_languages.errors %}
        <div class="text-danger small mt-2">{{ form.communication_languages.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="id_event_languages" class="form-label">{% translate "Language of the event" %}</label>
      {{ form.event_languages }}
      <div class="form-text">{% translate "Hold Ctrl (Windows) / Cmd (Mac) to select multiple" %}.</div>
      {% if form.event_languages.errors %}
        <div class="text-danger small mt-2">{{ form.event_languages.errors }}</div>
      {% endif %}
    </div>

    <div class="mb-3">
      <label for="id_accepted_event_categories" class="form-label">{% translate "Event categories you accept" %}</label>
      {{ form.accepted_event_categories }}
      <div class="form-text">{% translate "Hold Ctrl (Windows) / Cmd (Mac) to select multiple" %}.</div>
      {% if form.accepted_event_categories.errors %}
        <div class="text-danger small mt-2">{{ form.accepted_event_categories.errors }}</div>
      {% endif %}
    </div>

    <!-- ================= PRICING ================= -->
    <hr class="my-4">
    <h5 class="mb-2">{% translate "Pricing" %}</h5>

    <div class="mb-3">
      <label for="id_currency" class="form-label">{% translate "Currency" %}</label>
      {{ form.currency }}
      {% if form.currency.errors %}
        <div class="text-danger small mt-2">{{ form.currency.errors }}</div>
      {% endif %}
    </div>

    <div id="pricing-fields" style="display:none;">
      <div class="mb-3">
        <label for="id_cost_per_hour" class="form-label">{% translate "Cost per hour" %}</label>
        <div class="input-group">
          <span class="input-group-text" id="currency-sign-hour">$</span>
          {{ form.cost_per_hour }}
        </div>
        {% if form.cost_per_hour.errors %}
          <div class="text-danger small mt-2">{{ form.cost_per_hour.errors }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        <label for="id_cost_per_5_hours" class="form-label">{% translate "Cost per 5 hours" %}</label>
        <div class="input-group">
          <span class="input-group-text" id="currency-sign-five">$</span>
          {{ form.cost_per_5_hours }}
        </div>
        {% if form.cost_per_5_hours.errors %}
          <div class="text-danger small mt-2">{{ form.cost_per_5_hours.errors }}</div>
        {% endif %}
      </div>
    </div>

    <div class="mb-3">
      <label for="id_profile_picture" class="form-label">{% translate "Profile picture" %}</label>
      {{ form.profile_picture }}
      {% if form.profile_picture.errors %}<div class="text-danger small mt-2">{{ form.profile_picture.errors }}</div>{% endif %}
    </div>

    <div class="mb-3">
      <label for="id_account_type" class="form-label">{% translate "Account type" %}</label>
      {{ form.account_type }}
      {% if form.account_type.errors %}<div class="text-danger small mt-2">{{ form.account_type.errors }}</div>{% endif %}
    </div>

    <div class="mb-3" id="professions-wrapper">
      <label for="id_professions" class="form-label">{% translate "Professions" %}</label>
      {{ form.professions }}
      {% if form.professions.errors %}<div class="text-danger small mt-2">{{ form.professions.errors }}</div>{% endif %}
    </div>

    <!-- ================= UPLOADS ================= -->
    <hr class="my-4">
    <h5 class="mb-2">{% translate "Upload professional pictures" %}</h5>
    <div class="mb-3">
      <label for="id_professional_images" class="form-label">{% translate "Professional images" %}</label>
      {{ professional_form.professional_images }}
      <div class="form-text">{% translate "You can upload multiple professional images" %}.</div>
    </div>

    <hr class="my-4">
    <h5 class="mb-2">{% translate "Upload normal pictures" %}</h5>
    <div class="mb-3">
      <label for="id_normal_images" class="form-label">{% translate "Normal images" %}</label>
      {{ photos_form.normal_images }}
      <div class="form-text">{% translate "You can upload multiple normal images" %}.</div>
    </div>

    <hr class="my-4">
    <h5 class="mb-2">{% translate "Upload Audio Acapella Covers" %}</h5>
    <div class="mb-3">
      <label for="id_audio_files" class="form-label">{% translate "Audio files" %}</label>
      {{ audio_form.audio_files }}
      <div class="form-text">{% translate "Accepted formats: mp3, wav" %}</div>
    </div>

    <hr class="my-4">
    <h5 class="mb-2">{% translate "Upload Video Acapella Covers" %}</h5>
    <div class="mb-3">
      <label for="id_video_files" class="form-label">{% translate "Video files" %}</label>
      {{ video_form.video_files }}
      <div class="form-text">{% translate "Accepted formats: mp4, webm" %}</div>
    </div>

    <button type="submit" class="btn btn-primary w-100 mt-2">
      {% translate "Save Changes" %}
    </button>

  </form>
</div>
