{% load i18n %}
<div>
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h3 class="text-white mb-0">
        {% if mode == "edit" %} {% translate "Edit news" %} {% else %} {% translate "New news" %} {% endif %}
      </h3>
      <div class="text-white-50 small">{% translate "Visible to everyone when published" %}</div>
    </div>

    <a class="btn btn-outline-light btn-sm"
       href="{% url 'accounts:dash_crud_news_list' %}"
       hx-get="{% url 'accounts:dash_crud_news_list' %}"
       hx-target="#dashMainCard" hx-swap="innerHTML" hx-push-url="true">
     {% translate " Back" %}
    </a>
  </div>

  <form method="post" enctype="multipart/form-data"
        style="background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.08); border-radius:16px; padding:16px;">
    {% csrf_token %}

    <div class="mb-3">
      <label class="form-label text-white-50 small">{% translate "Title" %}</label>
      {{ form.title }}
      {% if form.title.errors %}<div class="text-danger small mt-1">{{ form.title.errors }}</div>{% endif %}
    </div>

    <div class="mb-3">
      <label class="form-label text-white-50 small">{% translate "Excerpt" %}</label>
      {{ form.excerpt }}
      {% if form.excerpt.errors %}<div class="text-danger small mt-1">{{ form.excerpt.errors }}</div>{% endif %}
    </div>

    <div class="mb-3">
      <label class="form-label text-white-50 small">{% translate "Body" %}</label>
      {{ form.body }}
      {% if form.body.errors %}<div class="text-danger small mt-1">{{ form.body.errors }}</div>{% endif %}
    </div>

    <div class="mb-3">
      <label class="form-label text-white-50 small">{% translate "Image" %}</label>
      <input type="file" name="image" class="form-control"
             style="background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12); color:#fff;">
      {% if mode == "edit" and obj.image %}
        <div class="text-white-50 small mt-2">{% translate "Current image" %}:</div>
        <img src="{{ obj.image.url }}" alt="" class="img-fluid rounded border mt-2" style="max-height: 240px;">
      {% endif %}
    </div>

    <div class="form-check mb-3">
      {{ form.is_published }}
      <label class="form-check-label text-white-50 small">{% translate "Publish (show to everyone)" %}</label>
    </div>

    <div class="d-flex gap-2">
      <button class="btn btn-primary" type="submit">{% translate "Save" %}</button>
      <a class="btn btn-outline-light"
         href="{% url 'accounts:dash_crud_news_list' %}"
         hx-get="{% url 'accounts:dash_crud_news_list' %}"
         hx-target="#dashMainCard" hx-swap="innerHTML" hx-push-url="true">
        {% translate "Cancel" %}
      </a>
    </div>
  </form>
</div>
